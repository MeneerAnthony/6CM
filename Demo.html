<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>DEMO versleepbaar kader</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
<style>
    * {
        -webkit-user-select: none; /* Safari */
        -ms-user-select: none; /* IE 10 and IE 11 */
        user-select: none; /* Standard syntax */
        font-family: "VT323", monospace;
        font-weight: 400;
        font-style: normal;
        font-size: 15px;
    }
    *:hover {
        cursor: default;
    }
    .foldercontainer {
        width: 75px;
        float: left;
        text-align: center;
        margin: 15px 0 0 15px;
    }
    .titel {
        width: 100%;
    }
    .folder {
        width: 76px;
        height: 69px;
        background-image: url(folder.png);
        background-size: contain;
    }
    .venster {
        width: 500px;
        height: 300px;
        background-color: white;
        border: solid 1px black;
        display: none;
        position: absolute;
        z-index: 1;
    }
    .balk {
        width: calc(100% - 10px);
        height: 25px;
        padding: 5px;
        background-color: black;
        color: white;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    .icoon {
        height: 15px;
        width: 20px;
        background-color: black;
        color: white;
        font-size: 10px;
        line-height: 15px;
        text-align: center;
        border: solid 0.5px white;
    }
    .selected {
        color: white;
        background-color: black;
    }
</style>
</head>
<body>
    <!-- Folders -->
    <div class="foldercontainer" ondblclick="vensterOpenen('venster')" onclick="vensterSelecteren('portfolio')">
        <div class="folder"></div>
        <div class="titel" id="portfolio">Portfolio</div>
    </div>

    <div class="foldercontainer" ondblclick="vensterOpenen('prullenmand')" onclick="vensterSelecteren('prullenmand')">
        <div class="folder"></div>
        <div class="titel" id="prullenmand">Prullenmand</div>
    </div>

    <!-- Hoofdvenster -->
    <div id="venster" class="venster">
        <div class="balk">This PC &gt; Local Disk (C:) &gt; Portfolio
            <div class="icoon" onclick="vensterSluiten('venster')">X</div>
        </div>
        <div class="foldercontainer" ondblclick="vensterOpenen('venster_grafisch')" onclick="vensterSelecteren('grafisch')">
            <div class="folder"></div>
            <div class="titel" id="grafisch">Grafisch Ontwerp</div>
        </div>
        <div class="foldercontainer" ondblclick="vensterOpenen('venster_fotografie')" onclick="vensterSelecteren('fotografie')">
            <div class="folder"></div>
            <div class="titel" id="fotografie">Fotografie</div>
        </div>
        <div class="foldercontainer" ondblclick="vensterOpenen('venster_video')" onclick="vensterSelecteren('video')">
            <div class="folder"></div>
            <div class="titel" id="video">Video</div>
        </div>
        <div class="foldercontainer" ondblclick="vensterOpenen('venster_webdesign')" onclick="vensterSelecteren('webdesign')">
            <div class="folder"></div>
            <div class="titel" id="webdesign">Webdesign</div>
        </div>
    </div>

    <!-- Sub-vensters -->
    <div id="venster_grafisch" class="venster">
        <div class="balk">This PC &gt; Local Disk (C:) &gt; Portfolio &gt; Grafisch ontwerp
            <div class="icoon" onclick="vensterSluiten('venster_grafisch')">X</div>
        </div>
    </div>

    <div id="venster_fotografie" class="venster">
        <div class="balk">This PC &gt; Local Disk (C:) &gt; Portfolio &gt; Fotografie
            <div class="icoon" onclick="vensterSluiten('venster_fotografie')">X</div>
        </div>
    </div>

    <div id="venster_video" class="venster">
        <div class="balk">This PC &gt; Local Disk (C:) &gt; Portfolio &gt; Video
            <div class="icoon" onclick="vensterSluiten('venster_video')">X</div>
        </div>
    </div>

    <div id="venster_webdesign" class="venster">
        <div class="balk">This PC &gt; Local Disk (C:) &gt; Portfolio &gt; Webdesign
            <div class="icoon" onclick="vensterSluiten('venster_webdesign')">X</div>
        </div>
    </div>

<script>
    let zIndexCounter = 1;  // Voor de z-index
    let offset = 30;  // Beginoffset voor de vensters
    const maxOffset = 150;  // Max offset voordat deze reset

    function vensterOpenen(id) {
        const venster = document.getElementById(id);
        venster.style.display = "block";
        venster.style.zIndex = ++zIndexCounter;

        if (id === "venster") {
            const centerX = (window.innerWidth - venster.offsetWidth) / 2;
            const centerY = (window.innerHeight - venster.offsetHeight) / 2;
            venster.style.left = `${centerX}px`;
            venster.style.top = `${centerY}px`;
        } else {
            venster.style.left = `${offset}px`;
            venster.style.top = `${offset}px`;
            offset += 30;

            if (offset > maxOffset) {
                offset = 30;
            }
        }
    }

    function vensterSluiten(id) {
        document.getElementById(id).style.display = "none";
    }

    function vensterSelecteren(id) {
        deselecteerFolders();
        document.getElementById(id).classList.add("selected");
    }

    function deselecteerFolders() {
        ["portfolio", "prullenmand", "grafisch", "fotografie", "video", "webdesign"]
            .forEach(id => document.getElementById(id).classList.remove("selected"));
    }

    function addListeners() {
        document.querySelectorAll('.balk').forEach(balk => {
            balk.addEventListener('mousedown', mouseDown, false);
        });
        window.addEventListener('mouseup', mouseUp, false);

        // Klik op de lege ruimte deselecteert folders
        document.body.addEventListener('click', function(e) {
            if (!e.target.closest('.foldercontainer') && !e.target.closest('.venster')) {
                deselecteerFolders();
            }
        });
    }

    function mouseDown(e) {
        const venster = e.target.closest('.venster');
        venster.dataset.isDragging = "true";
        venster.dataset.offsetX = e.clientX - venster.offsetLeft;
        venster.dataset.offsetY = e.clientY - venster.offsetTop;
        venster.style.zIndex = ++zIndexCounter;
        window.addEventListener('mousemove', divMove, true);
    }

    function mouseUp() {
        document.querySelectorAll('.venster').forEach(venster => {
            venster.dataset.isDragging = "false";
        });
        window.removeEventListener('mousemove', divMove, true);
    }

    function divMove(e) {
        document.querySelectorAll('.venster').forEach(venster => {
            if (venster.dataset.isDragging === "true") {
                venster.style.left = `${e.clientX - venster.dataset.offsetX}px`;
                venster.style.top = `${e.clientY - venster.dataset.offsetY}px`;
            }
        });
    }

    window.addEventListener('load', addListeners);
</script>
</body>
</html>